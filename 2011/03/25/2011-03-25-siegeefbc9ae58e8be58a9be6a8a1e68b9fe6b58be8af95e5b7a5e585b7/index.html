<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Siege：压力模拟/测试工具 | Evan&#39;s Blog</title>
  <meta name="author" content="Evan Xu">
  
  <meta name="description" content="Siege（英文意思是围攻）是一个压力测试和评测工具，设计用于WEB开发这评估应用在压力下的承受能力：可以根据配置对一个WEB站点进行多用户的并发访问，记录每个用户所有请求过程的相应时间，并在一定数量的并发访问下重复进行。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Siege：压力模拟/测试工具"/>
  <meta property="og:site_name" content="Evan&#39;s Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="alternate" href="/atom.xml" title="Evan&#39;s Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Evan&#39;s Blog</a></h1>
  <h2 class="subtitle">Always believe that something wonderful is about to happen</h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
      <li><a href="/atom.xml">RSS</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2011-03-25T01:32:15.000Z"><a href="/2011/03/25/2011-03-25-siegeefbc9ae58e8be58a9be6a8a1e68b9fe6b58be8af95e5b7a5e585b7/">Mar 25 2011</a></time>
      
      
  
    <h1 class="title">Siege：压力模拟/测试工具</h1>
  

    </header>
    <div class="entry">
      
        <p>Siege（英文意思是围攻）是一个压力测试和评测工具，设计用于WEB开发这评估应用在压力下的承受能力：可以根据配置对一个WEB站点进行多用户的并发访问，记录每个用户所有请求过程的相应时间，并在一定数量的并发访问下重复进行。</p>
<a id="more"></a>

<p>最早使用的压力测试工具是apache的ab(apache benchmark)，apache ab做重复压力测试不错，但是每次只能测试一个链接，如何测试一组链接（比如从日志中导出的1个小时的日志，做真实压力测试），后来找到了这个：<br>Siege是一个压力测试和评测工具，设计用于WEB开发这评估应用在压力下的承受能力：可以根据配置对一个WEB站点进行多用户的并发访问，记录每个用户所有请求过程的相应时间，并在一定数量的并发访问下重复进行。<br>SIEGE is an http regressive testing and benchmarking utility. It was designed to let web developers measure the performance of their code under duress, to see how it will stand up to load on the internet. It lets the user hit a webserver with a configurable number of concurrent simulated users. Those users place the webserver “under siege.” The duration of the siege is measured in transactions, the sum of simulated users and the number of times each simulated user repeats the process of hitting the server. Thus 20 concurrent users 50 times is 1000 transactions, the length of the test.</p>
<p>下载/安装<br>Siege时一个开放源代码项目：<a href="http://www.joedog.org/siege/" target="_blank">http://www.joedog.org/siege/</a></p>
<p>下载：<br>wget ftp://sid.joedog.org/pub/siege/siege-latest.tar.gz</p>
<p>安装：<br>%./configure ; make</p>
<h1 id="make_install">make install</h1>
<p>siege包含了一组压力测试工具：<br>SIEGE (1) Siege是一个HTTP压力测试和评测工具.<br>使用样例：<br>任务列表：www.chedong.com.url文件<br><a href="http://www.chedong.com/tech/" target="_blank">http://www.chedong.com/tech/</a><br><a href="http://www.chedong.com/tech/acdsee.html" target="_blank">http://www.chedong.com/tech/acdsee.html</a><br><a href="http://www.chedong.com/tech/ant.html" target="_blank">http://www.chedong.com/tech/ant.html</a><br><a href="http://www.chedong.com/tech/apache_install.html" target="_blank">http://www.chedong.com/tech/apache_install.html</a><br><a href="http://www.chedong.com/tech/awstats.html" target="_blank">http://www.chedong.com/tech/awstats.html</a><br><a href="http://www.chedong.com/tech/cache.html" target="_blank">http://www.chedong.com/tech/cache.html</a><br><a href="http://www.chedong.com/tech/click.html" target="_blank">http://www.chedong.com/tech/click.html</a><br><a href="http://www.chedong.com/tech/cms.html" target="_blank">http://www.chedong.com/tech/cms.html</a><br><a href="http://www.chedong.com/tech/compress.html" target="_blank">http://www.chedong.com/tech/compress.html</a><br><a href="http://www.chedong.com/tech/cvs_card.html" target="_blank">http://www.chedong.com/tech/cvs_card.html</a><br><a href="http://www.chedong.com/tech/default.html" target="_blank">http://www.chedong.com/tech/default.html</a><br><a href="http://www.chedong.com/tech/dev.html" target="_blank">http://www.chedong.com/tech/dev.html</a><br><a href="http://www.chedong.com/tech/gnu.html" target="_blank">http://www.chedong.com/tech/gnu.html</a><br>….</p>
<p>siege -c 20 -r 2 -f www.chedong.com.url<br>参数说明：<br>-c 20 并发20个用户<br>-r 2 重复循环2次<br>-f www.chedong.com.url 任务列表：URL列表</p>
<p>输出样例：</p>
<p><strong> Siege 2.59
</strong> Preparing 20 concurrent users for battle. 这次“战斗”准备了20个并发用户<br>The server is now under siege.. done. 服务在“围攻”测试中：<br>Transactions: 40 hits 完成40次处理<br>Availability: 100.00 % 成功率<br>Elapsed time: 7.67 secs 总共用时<br>Data transferred: 877340 bytes 共数据传输：877340字节<br>Response time: 1.65 secs 相应用时1.65秒：显示网络连接的速度<br>Transaction rate: 5.22 trans/sec 平均每秒完成5.22次处理：表示服务器后台处理的速度<br>Throughput: 114385.92 bytes/sec 平均每秒传送数据：114385.92字节<br>Concurrency: 8.59 最高并发数 8.59<br>Successful transactions: 40 成功处理次数<br>Failed transactions: 0 失败处理次数</p>
<p>注意：由于速度很快，可能会达不到并发速度很高就已经完成。Response time显示的是测试机器和被测试服务器之间网络链接状况。Transaction rate则表示服务器端任务处理的完成速度。</p>
<p>辅助工具：<br>增量压力测试：</p>
<p>为了方便增量压力测试，siege还包含了一些辅助工具：<br>bombardment (1)<br>是一个辅助工具：用于按照增量用户压力测试：<br>使用样例：<br>bombardment urlfile.txt 5 3 4 1<br>初始化URL列表：urlfile.txt<br>初始化为：5个用户<br>每次增加：3个用户<br>运行：4次<br>每个客户端之间的延迟为：1秒</p>
<p>输出成CSV格式：<br>siege2csv.pl (1)<br>siege2csv.pl将bombardment的输出变成CSV格式：<br>Time Data Transferred Response Time Transaction Rate Throughput Concurrency Code 200 (note that this is horribly broken.)<br>242 60.22 603064 0.02 4.02 10014.35 0.08<br>605 59.98 1507660 0.01 10.09 25136.05 0.12<br>938 59.98 2337496 0.02 15.64 38971.26 0.26<br>1157 60 2883244 0.04 19.28 48054.07 0.78</p>
<p>参考：<br>开源测试工具：<a href="http://www.opensourcetesting.org/performance.php" target="_blank">http://www.opensourcetesting.org/performance.php</a></p>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/OS/">OS</a>
  </div>

        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:www.xujingbao.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/DB tech/">DB tech</a><small>3</small></li>
  
    <li><a href="/categories/Mac/Github/">Github</a><small>1</small></li>
  
    <li><a href="/categories/Java/">Java</a><small>3</small></li>
  
    <li><a href="/categories/Life/">Life</a><small>5</small></li>
  
    <li><a href="/categories/Mac/">Mac</a><small>1</small></li>
  
    <li><a href="/categories/OS/">OS</a><small>15</small></li>
  
    <li><a href="/categories/Other/">Other</a><small>2</small></li>
  
    <li><a href="/categories/Python/">Python</a><small>1</small></li>
  
    <li><a href="/categories/Ruby/">Ruby</a><small>2</small></li>
  
    <li><a href="/categories/Web tech/">Web tech</a><small>4</small></li>
  
    <li><a href="/categories/osx/brew/">brew</a><small>1</small></li>
  
    <li><a href="/categories/c/">c</a><small>1</small></li>
  
    <li><a href="/categories/iOS/">iOS</a><small>19</small></li>
  
    <li><a href="/categories/osx/">osx</a><small>1</small></li>
  
    <li><a href="/categories/c/pthread/">pthread</a><small>1</small></li>
  
    <li><a href="/categories/c/pthread/timeout/">timeout</a><small>1</small></li>
  
    <li><a href="/categories/osx/brew/zsh/">zsh</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/2014/04/08/insufficient-permission-for-adding-an-object-to-repository-database/"> insufficient permission for adding an object to repository database</a>
      </li>
    
      <li>
        <a href="/2013/11/21/Error-usr-bin-occurs-before-usr-local-bin/">Error:/usr/bin occurs before /usr/local/bin</a>
      </li>
    
      <li>
        <a href="/2013/10/18/shi-yong-qi-niu-yun-cun-chu-tuo-guan-wo-de-octopressbo-ke/">使用七牛云存储托管Octopress</a>
      </li>
    
      <li>
        <a href="/2013/10/04/pthread-cond-timedwait-shi-jian-de-she-ding/">pthread_cond_timedwait设定</a>
      </li>
    
      <li>
        <a href="/2013/09/16/hou-de-wu-xian-ju-hua/">OSX升级失败后的无限菊花</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/ARC/">ARC</a><small>1</small></li>
  
    <li><a href="/tags/Alfred/">Alfred</a><small>1</small></li>
  
    <li><a href="/tags/Amazon/">Amazon</a><small>1</small></li>
  
    <li><a href="/tags/Apache/">Apache</a><small>1</small></li>
  
    <li><a href="/tags/App Store/">App Store</a><small>1</small></li>
  
    <li><a href="/tags/DB tech/">DB tech</a><small>3</small></li>
  
    <li><a href="/tags/IP/">IP</a><small>1</small></li>
  
    <li><a href="/tags/MRC/">MRC</a><small>1</small></li>
  
    <li><a href="/tags/MacOS/">MacOS</a><small>1</small></li>
  
    <li><a href="/tags/NodeJs/">NodeJs</a><small>1</small></li>
  
    <li><a href="/tags/OS/">OS</a><small>2</small></li>
  
    <li><a href="/tags/QRals/">QRals</a><small>1</small></li>
  
    <li><a href="/tags/Ruby/">Ruby</a><small>1</small></li>
  
    <li><a href="/tags/SSD/">SSD</a><small>1</small></li>
  
    <li><a href="/tags/UIBarButtonItem/">UIBarButtonItem</a><small>1</small></li>
  
    <li><a href="/tags/UIButton/">UIButton</a><small>1</small></li>
  
    <li><a href="/tags/UITableViewCell/">UITableViewCell</a><small>1</small></li>
  
    <li><a href="/tags/UIWebView/">UIWebView</a><small>1</small></li>
  
    <li><a href="/tags/Uncrustify/">Uncrustify</a><small>1</small></li>
  
    <li><a href="/tags/Unix/">Unix</a><small>1</small></li>
  
    <li><a href="/tags/Web tech/">Web tech</a><small>1</small></li>
  
    <li><a href="/tags/WordPress/">WordPress</a><small>1</small></li>
  
    <li><a href="/tags/Xcode/">Xcode</a><small>1</small></li>
  
    <li><a href="/tags/brew/">brew</a><small>1</small></li>
  
    <li><a href="/tags/htaccess/">htaccess</a><small>1</small></li>
  
    <li><a href="/tags/iOS/">iOS</a><small>1</small></li>
  
    <li><a href="/tags/iptables/">iptables</a><small>1</small></li>
  
    <li><a href="/tags/macports/">macports</a><small>1</small></li>
  
    <li><a href="/tags/openssl/">openssl</a><small>1</small></li>
  
    <li><a href="/tags/plist/">plist</a><small>1</small></li>
  
    <li><a href="/tags/spring/">spring</a><small>1</small></li>
  
    <li><a href="/tags/workflow/">workflow</a><small>1</small></li>
  
    <li><a href="/tags/价值观/">价值观</a><small>1</small></li>
  
    <li><a href="/tags/内存管理/">内存管理</a><small>1</small></li>
  
    <li><a href="/tags/固态硬盘/">固态硬盘</a><small>1</small></li>
  
    <li><a href="/tags/新浪微博SDK/">新浪微博SDK</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
   © 2014 Evan Xu<br />
   Powered by Hexo and Theme by Pacman and Hosted with ❤ by GitHub<br />
</div>
<div class="clearfix"></div>
</footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>